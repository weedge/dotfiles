#!/bin/sh

cd $(dirname $0)
DOTFILES_ROOT=$(pwd)

install() {
  name=$(basename $1 | sed 's/\.git//')
  git submodule add --branch master --name $name $1 vim.symlink/bundle/$name
  git commit -em "Installed $name"
}

remove() {
  name=$(basename $1)
  git submodule deinit $1
  git rm -f $1
  git rm -rf .git/modules/$name
  git add .gitmodules
  git commit -em "Removed $name"
}

update() {
  git pull
  git submodule update --init --recursive --remote
  git add vim.symlink/bundle
  git commit -em "Updated Vim Plugins"
}

case $1 in
  "install" )
    install $2
    ;;
  "remove" )
    remove $2
    ;;
  "update" )
    update
    ;;
  * )
    prog=$(basename $0)
    echo "Usage:"
    echo "$prog install <git URI>"
    echo "$prog remove  <submodule directory>"
    echo "$prog update"
    ;;
esac
